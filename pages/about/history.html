<script>
  $(document).ready(() => {
    let isMobile = $(window).width() < 750;

    $(window).resize(function () {
      isMobile = $(window).width() < 750;
    });

    const $elements = $(".opserver");
    const $span = $(".history-con > .content-con > .left > span");
    const $left = $(".history-con > .content-con > .left");
    $(window).scroll(function () {
      let height = $(document).scrollTop();

      $elements.each(function (index) {
        let start = isMobile ? $(this).offset().top - 250 : $(this).offset().top - 250;
        let end = isMobile
          ? $(this).offset().top - 180 + $(this).height()
          : $(this).offset().top - 130 + $(this).height();

        if ((index === 0 && 0 < height && height < end) || (index !== 0 && start < height && height < end)) {
          $(this).find("span").addClass("active");
          $($span).eq(index).addClass("active");
        } else {
          $(this).find("span").removeClass("active");
          $($span).eq(index).removeClass("active");
        }
      });
    });

    $span.click(function () {
      const index = $span.not(".dashed").index(this);

      $("html, body").animate(
        {
          scrollTop: $($elements[index]).offset().top - 249,
        },
        500
      );
    });

    let didScroll;
    let lastScrollTop = 0;
    let delta = 5;

    $(window).scroll(function (e) {
      didScroll = true;
    });

    setInterval(function () {
      if (didScroll) {
        hasScrolled();
        didScroll = false;
      }
    }, 250);

    function hasScrolled() {
      if (isMobile) {
        let st = $(this).scrollTop();
        if (st > 670) {
          $left.css({ borderTop: "none" });
        } else {
          $left.css({ borderTop: "solid 1px #111" });
        }

        if (Math.abs(lastScrollTop - st) <= delta) {
          return;
        }

        if (st > lastScrollTop && st > 80) {
          $left.css({ top: "0px" });
        } else {
          if (st + $(window).height() < $(document).height()) {
            $left.css({ top: "70px" });
          }
        }
        lastScrollTop = st;
      }
    }
  });
</script>

<div class="history-con">
  <div class="title-box">
    <p class="title">어제보다 오늘,</p>
    <p class="title">오늘보다 내일 더 성장 하겠습니다.</p>
  </div>
  <div class="content-con">
    <div class="left">
      <span>2024</span>
      <div class="dashed"></div>
      <span>2023</span>
      <div class="dashed"></div>
      <span>2022</span>
      <div class="dashed"></div>
      <span>2021</span>
    </div>
    <div class="right">
      <div class="year-box opserver">
        <span class="year active">2024</span>
        <div class="content-con">
          <div class="content-box">
            <span class="mon">01</span>
            <div class="span-box">
              <span>키르키스공화국 (주)키르키스인더스트리 업무협약 체결</span>
              <span>제주지사 Open</span>
              <span>일본 사단법인 자연과에너지 업무협약 체결</span>
            </div>
          </div>
        </div>
      </div>
      <div class="line"></div>
      <div class="year-box opserver">
        <span class="year">2023</span>
        <div class="content-con">
          <div class="content-box">
            <span class="mon">12</span>
            <div class="span-box">
              <span>경남지사 Open</span>
              <span>AI바우처 지원사업 공급기업 등록</span>
              <span>한국서부발전 중소기업 좋은 일자리 만들기 아이디어 공모전 우수상</span>
              <span>한국전력 KTP(KEPCO Trust Partner)인증</span>
            </div>
          </div>
          <div class="content-box">
            <span class="mon">11</span>
            <div class="span-box">
              <span>목포대학교 산,학 협력 협약</span>
              <span>(주)태산AMC대부 Fintech 사업을 위한 업무협약 체결 (자동차담보대출)</span>
              <span>(주)에코파워 Fintech 사업을 위한 업무협약 체결 (재생에너지발전소)</span>
              <span>JM에너지솔루션(주) Fintech 사업을 위한 업무협약 체결 (ESS+전기차충전기)</span>
              <span>Fintech 사업부 출범</span>
            </div>
          </div>
          <div class="content-box">
            <span class="mon">10</span>
            <div class="span-box">
              <span>ISO 9001 인증</span>
            </div>
          </div>
          <div class="content-box">
            <span class="mon">09</span>
            <div class="span-box">
              <span>(주)에코모션 업무협약 체결</span>
              <span>(주)애자일소다 업무협약 체결</span>
            </div>
          </div>
          <div class="content-box">
            <span class="mon">08</span>
            <div class="span-box">
              <span>(주)에스디플렉스 업무협약 체결</span>
            </div>
          </div>
          <div class="content-box">
            <span class="mon">05</span>
            <div class="span-box">
              <span>(주)윈월드 업무협약 체결</span>
              <span>벤쳐기업인증 (혁신성장유형)</span>
              <span>녹색에너지 우수기업 대상</span>
            </div>
          </div>
          <div class="content-box">
            <span class="mon">04</span>
            <div class="span-box">
              <span>한국소프트웨어산업협회 소프트웨어사업자 등록(B23-261148-003)</span>
              <span>기업부설연구소 설립</span>
            </div>
          </div>
          <div class="content-box">
            <span class="mon">03</span>
            <div class="span-box">
              <span>렉스이노베이션 주식회사 (사명 변경) – 에너지혁신 기업</span>
            </div>
          </div>
        </div>
      </div>
      <div class="line"></div>
      <div class="year-box opserver">
        <span class="year">2022</span>
        <div class="content-con">
          <div class="content-box">
            <span class="mon">09</span>
            <div class="span-box">
              <span>한국전력(KEPCO) 연구소 기업 협약 (제1463호)</span>
            </div>
          </div>
        </div>
      </div>
      <div class="line"></div>
      <div class="year-box opserver">
        <span class="year">2021</span>
        <div class="content-con">
          <div class="content-box">
            <span class="mon">08</span>
            <div class="span-box">
              <span>주식회사 왕산엔지니어링 설립</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  .history-con {
    width: 1280px;
    color: #111;
    display: flex;
    flex-direction: column;
    gap: 85px;
  }
  .history-con > .title-box > .title {
    font-size: 38px;
    font-weight: 700;
    line-height: 140%;
  }
  .history-con > .content-con {
    display: flex;
    gap: 95px;
    box-sizing: border-box;
    align-items: start;
  }

  .history-con > .content-con > .left {
    position: sticky;
    top: 150px;
    border-right: 1px solid #111;
    border-left: 1px solid #111;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 10px;
    padding: 40px 40px;
    background-color: #fff;
  }

  .history-con > .content-con > .left > .dashed {
    height: 40px;
    border-left: dashed 1px #aaaaaa;
  }

  .history-con > .content-con > .left > span {
    font-size: 30px;
    width: 100px;
    text-align: center;
    font-weight: 300;
    cursor: pointer;
  }

  .history-con > .content-con > .left > .active {
    font-weight: 700;
  }

  .history-con > .content-con > .right {
    display: flex;
    flex-direction: column;
    gap: 60px;
    width: 100%;
  }

  .history-con > .content-con > .right > .line {
    height: 1px;
    width: 100%;
    background-color: #eeeeee;
  }

  .history-con > .content-con > .right > .year-box {
    display: flex;
    gap: 60px;
    background: #fff;
  }
  .history-con > .content-con > .right > .year-box > .year {
    color: #e9e9e9;
    font-size: 80px;
    font-weight: 900;
    width: 200px;
    transition: 0.5s;
  }
  .history-con > .content-con > .right > .year-box > .active {
    color: #f26933;
  }
  .history-con > .content-con > .right > .year-box > .content-con {
    display: flex;
    flex-direction: column;
    gap: 40px;
  }

  .history-con > .content-con > .right > .year-box > .content-con > .content-box {
    display: flex;
    gap: 30px;
  }
  .history-con > .content-con > .right > .year-box > .content-con > .content-box > .mon {
    font-size: 18px;
    font-weight: 700;
  }
  .history-con > .content-con > .right > .year-box > .content-con > .content-box > .span-box {
    display: flex;
    flex-direction: column;
    gap: 20px;
  }
  .history-con > .content-con > .right > .year-box > .content-con > .content-box > .span-box > span {
    font-size: 18px;
    font-weight: 300;
  }

  @media screen and (max-width: 768px) {
    .history-con {
      width: 100%;
      gap: 40px;
    }
    .history-con > .title-box > .title {
      font-size: 24px;
      line-height: 130%;
    }
    .history-con > .content-con {
      flex-direction: column;
      gap: 40px;
    }

    .history-con > .content-con > .left {
      top: 0px;
      left: -24px;
      border-right: none;
      border-left: none;
      border-bottom: solid 1px #000;
      border-top: solid 1px #000;
      flex-direction: row;
      justify-content: center;
      gap: 0px;
      padding: 20px 0px;
      width: 100%;
    }

    .history-con > .content-con > .left > .dashed {
      height: 1px;
      width: 20px;
      border-top: dashed 1px #aaaaaa;
    }

    .history-con > .content-con > .left > span {
      font-size: 20px;
    }

    .history-con > .content-con > .right {
      display: flex;
      flex-direction: column;
      gap: 40px;
      width: 100%;
    }

    .history-con > .content-con > .right > .line {
      height: 1px;
      width: 100%;
      background-color: #eeeeee;
    }

    .history-con > .content-con > .right > .year-box {
      display: flex;
      flex-direction: column;
      gap: 20px;
      background: #fff;
    }
    .history-con > .content-con > .right > .year-box > .year {
      font-size: 40px;
      width: 100px;
    }

    .history-con > .content-con > .right > .year-box > .content-con {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .history-con > .content-con > .right > .year-box > .content-con > .content-box {
      display: flex;
      gap: 20px;
    }
    .history-con > .content-con > .right > .year-box > .content-con > .content-box > .mon {
      font-size: 16px;
    }
    .history-con > .content-con > .right > .year-box > .content-con > .content-box > .span-box {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }
    .history-con > .content-con > .right > .year-box > .content-con > .content-box > .span-box > span {
      font-size: 16px;
    }
  }
</style>
